<!DOCTYPE html>
<html>
<head>
    <title>DESKTOP-PC01 - TeamViewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #0070f3;
            color: white;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        h1 { color: white; text-align: center; }
        .button {
            background: #ff6b35;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-size: 14px;
            font-weight: bold;
        }
        .button:hover { 
            background: #e55a2b; 
            transform: translateY(-2px);
        }
        .status {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ff6b35;
        }
        .session-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        .info-item {
            background: rgba(0,0,0,0.2);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 13px;
        }
        .test-controls {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .window-list {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        .window-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 4px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            font-size: 12px;
        }
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .active { background: #22c55e; }
        .minimized { background: #f59e0b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¥ï¸ TeamViewer ë‹¤ì¤‘ ì„¸ì…˜ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="status">
            <strong>í˜„ì¬ ì„¸ì…˜:</strong> <span id="currentSession">DESKTOP-PC01</span><br>
            <strong>ì—°ê²° ID:</strong> <span id="connectionId">1 234 567 890</span><br>
            <strong>ìƒíƒœ:</strong> <span id="sessionStatus">í™œì„± ì—°ê²°</span><br>
            <strong>ì°½ ê°œìˆ˜:</strong> <span id="windowCount">1</span>ê°œ
        </div>
        
        <div class="session-info">
            <div class="info-item">
                <strong>í•´ìƒë„:</strong> 1920x1080
            </div>
            <div class="info-item">
                <strong>ìƒ‰ìƒ:</strong> 32ë¹„íŠ¸
            </div>
            <div class="info-item">
                <strong>í’ˆì§ˆ:</strong> ìë™ ìµœì í™”
            </div>
            <div class="info-item">
                <strong>ì§€ì—°ì‹œê°„:</strong> <span id="latency">25ms</span>
            </div>
        </div>

        <div class="test-controls">
            <h3>ğŸ§ª í…ŒìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤</h3>
            <button class="button" onclick="createNewSession()">â• ìƒˆ ì„¸ì…˜ ìƒì„±</button>
            <button class="button" onclick="switchSession()">ğŸ”„ ì„¸ì…˜ ì „í™˜</button>
            <button class="button" onclick="minimizeAll()">ğŸ—• ëª¨ë“  ì°½ ìµœì†Œí™”</button>
            <button class="button" onclick="restoreAll()">ğŸ—– ëª¨ë“  ì°½ ë³µì›</button>
            
            <div class="window-list" id="windowList">
                <h4>í™œì„± ì°½ ëª©ë¡:</h4>
                <div class="window-item">
                    <div style="display: flex; align-items: center;">
                        <div class="status-indicator active"></div>
                        <span>DESKTOP-PC01 - TeamViewer</span>
                    </div>
                    <small>PID: <span id="mainPid">TeamViewer</span></small>
                </div>
            </div>
        </div>

        <div class="test-controls">
            <h3>ğŸ“‹ ì‚¬ìš©ë²•</h3>
            <ol style="font-size: 14px; line-height: 1.6;">
                <li><strong>"ìƒˆ ì„¸ì…˜ ìƒì„±"</strong> ë²„íŠ¼ìœ¼ë¡œ ë‹¤ì¤‘ TeamViewer ì„¸ì…˜ ì‹œë®¬ë ˆì´ì…˜</li>
                <li><strong>"ëª¨ë“  ì°½ ìµœì†Œí™”"</strong> í›„ Remote Managerì—ì„œ í™•ì¸</li>
                <li><strong>ê° ì„¸ì…˜ì´ ê°œë³„ì ìœ¼ë¡œ ê°ì§€</strong>ë˜ëŠ”ì§€ í™•ì¸</li>
                <li><strong>ë‹¤ì¤‘ì„¸ì…˜ ë¼ë²¨</strong>ì´ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸</li>
                <li><strong>ì„¸ì…˜ë³„ ë…ë¦½ì ì¸ ì„¤ì •</strong> (ê·¸ë£¹, ì¹´í…Œê³ ë¦¬) ê°€ëŠ¥í•œì§€ í…ŒìŠ¤íŠ¸</li>
            </ol>
        </div>
    </div>

    <script>
        let sessionCount = 1;
        let windows = [{
            title: 'DESKTOP-PC01 - TeamViewer',
            isMinimized: false,
            id: 1
        }];
        
        const computerNames = [
            'DESKTOP-PC01', 'DESKTOP-PC01', 'DESKTOP-PC01', 
            'DESKTOP-PC01', 'DESKTOP-PC01', 'DESKTOP-PC01'
        ];
        
        function updateWindowList() {
            const windowList = document.getElementById('windowList');
            let html = '<h4>í™œì„± ì°½ ëª©ë¡:</h4>';
            
            windows.forEach(window => {
                const statusClass = window.isMinimized ? 'minimized' : 'active';
                const statusText = window.isMinimized ? 'ìµœì†Œí™”ë¨' : 'í™œì„±';
                
                html += `
                    <div class="window-item">
                        <div style="display: flex; align-items: center;">
                            <div class="status-indicator ${statusClass}"></div>
                            <span>${window.title}</span>
                        </div>
                        <small>${statusText} | Handle: ${window.id}</small>
                    </div>
                `;
            });
            
            windowList.innerHTML = html;
            document.getElementById('windowCount').textContent = windows.length;
        }
        
        function createNewSession() {
            sessionCount++;
            const randomName = computerNames[Math.floor(Math.random() * computerNames.length)];
            const newTitle = `${randomName} - TeamViewer`;
            
            // ê°™ì€ ì œëª©ì´ì–´ë„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
            let finalTitle = newTitle;
            
            windows.push({
                title: finalTitle,
                isMinimized: false,
                id: Date.now() + Math.floor(Math.random() * 1000)
            });
            
            // ìƒˆ ì°½ ì—´ê¸° - URLì— ì»´í“¨í„°ëª…ê³¼ ê³ ìœ  WindowHandle íŒŒë¼ë¯¸í„° ì „ë‹¬
            const computerName = finalTitle.replace(' - TeamViewer', '');
            const uniqueWindowHandle = Date.now() + Math.floor(Math.random() * 1000);
            const newWindow = window.open(
                `test-teamviewer.html?computer=${encodeURIComponent(computerName)}&windowHandle=${uniqueWindowHandle}`, 
                `teamviewer_${Date.now()}`,
                'width=500,height=400'
            );
            
            updateWindowList();
            alert(`ìƒˆ TeamViewer ì„¸ì…˜ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: ${finalTitle}`);
        }
        
        function switchSession() {
            if (windows.length > 1) {
                const randomWindow = windows[Math.floor(Math.random() * windows.length)];
                document.title = randomWindow.title;
                document.getElementById('currentSession').textContent = randomWindow.title.replace(' - TeamViewer', '');
                alert(`ì„¸ì…˜ì´ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤: ${randomWindow.title}`);
            } else {
                alert('ì „í™˜í•  ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ìƒˆ ì„¸ì…˜ì„ ìƒì„±í•˜ì„¸ìš”.');
            }
        }
        
        function minimizeAll() {
            windows.forEach(window => {
                window.isMinimized = true;
            });
            updateWindowList();
            alert('ëª¨ë“  TeamViewer ì°½ì´ ìµœì†Œí™”ë˜ì—ˆìŠµë‹ˆë‹¤. Remote Managerì—ì„œ í™•ì¸í•˜ì„¸ìš”!');
        }
        
        function restoreAll() {
            windows.forEach(window => {
                window.isMinimized = false;
            });
            updateWindowList();
            alert('ëª¨ë“  TeamViewer ì°½ì´ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
        
        // ì£¼ê¸°ì  ì—…ë°ì´íŠ¸
        setInterval(() => {
            const latency = 20 + Math.floor(Math.random() * 20);
            document.getElementById('latency').textContent = `${latency}ms`;
        }, 3000);
        
        // ì°½ ìƒíƒœ ë³€í™” ê°ì§€
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                console.log('TeamViewer ì°½ì´ ìˆ¨ê²¨ì§/ìµœì†Œí™”ë¨');
            } else {
                console.log('TeamViewer ì°½ì´ í™œì„±í™”ë¨');
            }
        });
        
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì»´í“¨í„°ëª…ê³¼ WindowHandle ì½ê¸°
        function initializeFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const computerName = urlParams.get('computer');
            const windowHandle = urlParams.get('windowHandle');
            
            if (computerName) {
                // ìƒˆ ì°½ì¸ ê²½ìš° ì œëª©ê³¼ ì„¸ì…˜ ì •ë³´ ì—…ë°ì´íŠ¸
                const newTitle = `${computerName} - TeamViewer`;
                document.title = newTitle;
                document.getElementById('currentSession').textContent = computerName;
                
                // ì—°ê²° IDë¥¼ ëœë¤í•˜ê²Œ ìƒì„±
                const randomId = Math.floor(Math.random() * 900000000) + 100000000;
                const formattedId = randomId.toString().replace(/(\d{3})(\d{3})(\d{3})/, '$1 $2 $3');
                document.getElementById('connectionId').textContent = formattedId;
                
                // ì§€ì—°ì‹œê°„ë„ ë‹¤ë¥´ê²Œ ì„¤ì •
                const latency = 15 + Math.floor(Math.random() * 30);
                document.getElementById('latency').textContent = `${latency}ms`;
                
                // ê³ ìœ í•œ WindowHandle ì‹œë®¬ë ˆì´ì…˜
                if (windowHandle) {
                    console.log(`TeamViewer ì„¸ì…˜ ì´ˆê¸°í™”: ${newTitle}, WindowHandle: ${windowHandle}`);
                    // RemoteManagerê°€ ê°ì§€í•  ìˆ˜ ìˆë„ë¡ ì „ì—­ ë³€ìˆ˜ ì„¤ì •
                    window.teamViewerWindowHandle = parseInt(windowHandle);
                } else {
                    // ê¸°ì¡´ ì°½(ì²« ë²ˆì§¸ ì°½)ì—ë„ ê³ ìœ í•œ WindowHandle í• ë‹¹
                    const defaultWindowHandle = Date.now();
                    console.log(`TeamViewer ì„¸ì…˜ ì´ˆê¸°í™”: ${newTitle}, ê¸°ë³¸ WindowHandle: ${defaultWindowHandle}`);
                    window.teamViewerWindowHandle = defaultWindowHandle;
                }
            }
        }
        
        // ì´ˆê¸°í™”
        initializeFromUrl();
        updateWindowList();
    </script>
</body>
</html>